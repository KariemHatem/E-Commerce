<!-- Cart Container -->
<div appFlowbiteInit>
  <!-- Table Title -->
  <div class="tabel-title text-center my-4 font-semibold">
    <h1 class="text-xl">{{ 'cartTitle' | translate }}</h1>
    <p class="text-main-color mt-2">{{ 'totlalPrice' | translate }}: {{ totalPrice() }}</p>
  </div>
  <!-- Clear Cart  -->
  <div class="flex items-center justify-between mb-4">
    <button class="btn-danger" (click)="clearCart()">
      <i class="fa-solid fa-trash"></i>
      {{ 'claerCart' | translate }}
    </button>
    <button class="btn-global" [routerLink]="['/address', cartId]">
      <i class="fa-solid fa-check"></i>
      {{ 'cartOrder' | translate }}
    </button>
  </div>
  <!-- Table Wrapper -->
  <div class="relative overflow-x-auto shadow-xs rounded-base border border-default">
    <!-- Cart Table -->
    <table class="w-full text-sm bg-gray-100 text-left rtl:text-right text-body mb-6">
      <!-- Table Header -->
      <thead class="text-sm text-body border-b border-default-medium">
        <tr>
          <th scope="col" class="px-16 py-3">
            <span class="sr-only">Image</span>
          </th>

          <th scope="col" class="px-6 text-lg py-3 font-bold">Product</th>

          <th scope="col" class="px-6 text-lg py-3 font-bold">Qty</th>

          <th scope="col" class="px-6 text-lg py-3 font-bold">Price</th>

          <th scope="col" class="px-6 text-lg py-3 font-bold">Action</th>
        </tr>
      </thead>

      <!-- Table Body -->
      <tbody>
        <!-- Loop through cart items -->
        @for (productCart of cartData(); track $index) {
        <tr class="border-b border-default">
          <!-- Product Image -->
          <td class="p-4">
            <img
              [src]="productCart.product.imageCover"
              class="w-16 md:w-24 max-w-full max-h-full"
              alt="Apple Watch"
            />
          </td>

          <!-- Product Title -->
          <td class="px-6 py-4 font-medium text-heading">
            {{ 'PRODUCTS.' + productCart.product.title | translate }}
          </td>

          <!-- Quantity Selector -->
          <td class="px-6 py-4">
            <form class="max-w-xs mx-auto">
              <label for="counter-input-1" class="sr-only">Choose quantity: </label>
              <div class="relative flex items-center">
                <!-- Decrement Button -->
                <span
                  type="button"
                  id="decrement-button-1"
                  data-input-counter-decrement="counter-input-1"
                  class="cursor-pointer flex items-center justify-center text-body box-border border border-default-medium hover:bg-neutral-tertiary-medium hover:text-heading focus:ring-4 focus:ring-neutral-tertiary rounded-full text-sm focus:outline-none h-6 w-6"
                >
                  <svg
                    (click)="changeCount(productCart.product._id, productCart.count - 1)"
                    class="w-3 h-3 text-heading"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 12h14"
                    />
                  </svg>
                </span>

                <!-- Quantity Input -->
                <input
                  type="text"
                  id="counter-input-1"
                  data-input-counter
                  class="shrink-0 text-heading border-0 bg-transparent text-sm font-normal focus:outline-none focus:ring-0 max-w-[2.5rem] text-center"
                  [value]="productCart.count"
                  required
                />

                <!-- Increment Button -->
                <span
                  type="button"
                  id="increment-button-1"
                  data-input-counter-increment="counter-input-1"
                  class="cursor-pointer flex items-center justify-center text-body box-border border border-default-medium hover:bg-neutral-tertiary-medium hover:text-heading focus:ring-4 focus:ring-neutral-tertiary rounded-full text-sm focus:outline-none h-6 w-6"
                >
                  <svg
                    (click)="changeCount(productCart.product._id, productCart.count + 1)"
                    class="w-3 h-3 text-heading"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 12h14m-7 7V5"
                    />
                  </svg>
                </span>
              </div>
            </form>
          </td>

          <!-- Product Price -->
          <td class="px-6 py-4 text-main-color font-semibold text-heading">
            {{ productCart.count * productCart.price | currency : ' EGP ' }}
          </td>

          <!-- Remove Button -->
          <td class="px-6 py-4">
            <a
              (click)="removeCartItems(productCart.product._id)"
              class="font-bold text-red-600 cursor-pointer"
            >
              Remove
            </a>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>
